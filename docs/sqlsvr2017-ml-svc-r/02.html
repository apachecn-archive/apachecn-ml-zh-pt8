<html><head/><body>
<html xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <title>Overview of Microsoft Machine Learning Server and SQL Server</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  

</head>
  <body id="NQU20-e3f81285367248f4bbc6431bcd4f926d" class="calibre">
        

                            
                    <h1 class="header-title" id="calibre_pb_0">Microsoft机器学习服务器和SQL Server概述</h1>
                
            
            
                
<p class="calibre2">在本章中，我们将探讨微软决定在SQL Server 2016中添加R语言的原因，以及这种集成克服了哪些负担。我们将在本章中讨论以下主题:</p>
<ul class="calibre7">
<li class="calibre8">解决分析障碍和R限制</li>
<li class="calibre8">微软R服务器平台</li>
<li class="calibre8">微软R服务架构</li>
<li class="calibre8">探索计算环境</li>
</ul>


            

            
        
    </body></html>


<html xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <title>Analytical barriers</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  

</head>
  <body id="OPEK0-e3f81285367248f4bbc6431bcd4f926d" class="calibre">
        

                            
                    <h1 class="header-title" id="calibre_pb_0">分析障碍</h1>
                
            
            
                
<p class="calibre2">许多公司在试图分析他们的数据时遇到了障碍。这些障碍通常是知识匮乏(并非所有部门都有分析数据的知识)和数据分散性(通常数据来自不同的来源)。</p>
<p class="calibre2">企业根据员工的角色或职能划分职责。这种分工有积极的作用，尤其是当企业规模很大时。通常，中小型企业也采用这样的角色，但是由于员工数量较少，它们通常被细化到更高的级别。</p>
<p class="calibre2">随着市场的快速变化、新技术的出现以及对更快适应的需求，许多专家已经注意到以下许多障碍:</p>
<ul class="calibre7">
<li class="calibre8">数据稀缺和数据分散</li>
<li class="calibre8">复杂(并且很多时候已经过时)的架构</li>
<li class="calibre8">缺乏知识</li>
<li class="calibre8">低生产率</li>
<li class="calibre8">对市场变化适应缓慢(上市时间长)</li>
</ul>
<p class="calibre2">许多企业都面临着至少一个(如果不是更多的话)障碍，微软通过向SQL Server开放R语言解决了这些障碍。它采用开源语言和开源技术，拓宽了知识库，使企业能够使用社区知识和社区解决方案，以及开放和民主化的分析。现在，这个知识库可以轻松共享，许多数据管理和数据工程任务可以卸载给其他角色和人员，而不是忍受和等待拥有主题学术知识的数据科学家和专家。这种卸载流程还弥合了IT和统计人员之间的传统鸿沟，这种鸿沟在过去会导致生产力低下和缓慢。这种知识和技能上的差距现在可以通过在SQL Server中使用R混合不同的角色和任务来克服(这意味着数据辩论者或数据管家可以仔细阅读R代码，这将有助于他们获得数据洞察力，而实际上不需要理解统计数据的复杂性)。理解或了解不同的平台并不令人惊讶，现在，许多IT人员可以使用统计学家和数据科学家提供的R语言。此外，数据科学家可以开始学习IT领域的技能和语言。</p>
<p class="calibre2">两个或更多不同部门的人之间的这种互联和共享知识也将提高生产率。当生产力提高时，统计和预测模型可以更快地部署、更改或适应消费者和市场的变化，并为数据工程师、管理者和分析师提供支持。这当然是一个企业改进创新路径和最大化开源潜力的方式，并且扩大使用不同方法和模型的实验沙箱。</p>
<p class="calibre2">解决这些障碍的最后一步是解决数据稀缺和复杂基础设施的问题。规则是，企业越大，基础设施越复杂。对于复杂的基础架构，我们可以理解数据驻留在不同的层或不同的粒度上，驻留在不同的平台上，驻留在不同的供应商上，驻留在不同的孤岛上，这使得数据分析离实现又进了一步。随着R的引入，这种复杂性可以用更简单的数据连接器来克服，这是一种更容易提取数据的方法。</p>
<p class="calibre2">随着R语言在分析领域变得越来越流行和重要，它可以为不同规模的企业做好准备，并且可以设计为超越供应商，无论您的解决方案是在内部还是在云中。由于能够直接从任何混合系统访问和读取数据，并且只提取需要的数据，因此对数据移动的需求也减少了。现在，企业中存在的所有障碍都可以通过更少的官僚主义、更好的集成和更少的工作来更快地解决。</p>
<p class="calibre2">拥抱开源语言的另一个重要方面是开源解决方案的普遍存在，许多大企业仍在为之奋斗。这一点不容忽视，必须加以考虑。微软通过几个步骤将R语言带上了平台:</p>
<ol class="calibre14">
<li value="1" class="calibre8">加入R联盟，该联盟负责支持R基金会和关键组织，紧密合作开发、分发和维护R引擎，并支持R相关的基础设施项目。其中一个项目是RHub项目(由<em class="calibre12"> Gabor Csardi </em>领导),它为开发、测试和验证R包提供服务。</li>
<li value="2" class="calibre8">在CC许可下创建一个R包的MRAN库，并使微软R引擎发行版的CRAN包可用并与R发行版兼容。</li>
<li value="3" class="calibre8">制作英特尔<strong class="calibre1"> MKL </strong> ( <strong class="calibre1">数学内核库</strong>)计算函数来提高R统计计算的性能，从MRAN资源库下载R引擎即可使用。<strong class="calibre1">基本线性代数子程序</strong> ( <strong class="calibre1"> BLAS </strong>)和<strong class="calibre1">线性代数包</strong> ( <strong class="calibre1"> LAPACK </strong>)是一个线性代数函数家族，为并行计算而增强。这样的函数有矩阵分解、Cholesky矩阵分解、向量和矩阵加法、标量乘法等等。</li>
<li value="4" class="calibre8">将许多R函数从Fortran重写为C++语言以提高性能。</li>
</ol>
<p class="calibre2">当我们比较克兰上可用的R发动机分布和MRAN上可用的R发动机分布时，我们可以很快支持MKL计算函数的理论。正如我们已经看到的，BLAS和LAPACK被vector或matrix取代，所以我们将比较(基准测试)两个R引擎分布之间的矩阵计算。</p>
<p class="calibre2">比较是在克兰R 3.3.0和MRAN R Open 3.3.0上进行的，代码如下:</p>
<pre class="calibre19"># Matrix creation 
set.seed (2908) 
M &lt;- 20000 
n &lt;- 100 
Mat &lt;- matrix (runif (M*n),M,n) 
 
 
# Matrix multiply 
system.time ( 
  Mat_MM &lt;- Mat%*% t(Mat), gcFirst=TRUE 
)[1] 
 
# Matrix multiply with crossprod 
system.time ( 
  Mat_CP &lt;- crossprod(Mat), gcFirst=TRUE 
)[1] </pre>
<p class="calibre2">以下是在以下时间内的结果(以秒为单位):</p>
<table class="table">
<tbody class="calibre20">
<tr class="calibre21">
<td class="calibre22">
<p class="calibre2"><strong class="calibre1">时间(秒)</strong></p>
</td>
<td class="calibre22">
<p class="calibre2"><strong class="calibre1">曲柄3.3.2 </strong></p>
</td>
<td class="calibre22">
<p class="calibre2">MRAN 3.3.2 </p>
</td>
</tr>
<tr class="calibre21">
<td class="calibre22">
<p class="calibre2">abbr. 毫米（millimeter）</p>
</td>
<td class="calibre22">
<p class="calibre2">26,69</p>
</td>
<td class="calibre22">
<p class="calibre2">2,75</p>
</td>
</tr>
<tr class="calibre21">
<td class="calibre22">
<p class="calibre2">大脑性麻痹</p>
</td>
<td class="calibre22">
<p class="calibre2">0,19</p>
</td>
<td class="calibre22">
<p class="calibre2">0,01</p>
</td>
</tr>
</tbody>
</table>
<p class="calibre2"> </p>
<p class="calibre2">在下图中，你可以看到克兰和MRAN R发动机的性能差异:</p>
<div><img src="img/00006.gif" class="calibre23"/></div>
<p>图1</p>
<p class="calibre2">该图显示了一个简单的线性代数，它使用矩阵或向量，执行速度提高了10倍(在我的本地客户机上测试——Inter I7，4个CPU，20 GB RAM)。注意，当您在本地机器上运行这个测试时，您应该观察RAM和磁盘存储消耗；您将会看到，就内存消耗而言，MRAN操作与CRAN操作相比是非常轻量级的。</p>
<p class="calibre2">当您下载R Open的MRAN发行版时，请注意将会有关于MKL多线程性能函数的附加信息:</p>
<div><img src="img/00007.jpeg" class="calibre24"/></div>
<p>图2:来源:<a href="https://mran.microsoft.com/download/" class="calibre4">https://mran.microsoft.com/download/</a></p>
<p class="calibre2">我们采取了更多的措施，让消费者、开发人员、争论者和大型企业的经理们相信R语言会一直存在下去。微软承诺，除了这一条款，还有对一般治理的支持，如果公司决定，它还可以在企业级别上获得R支持。</p>
<p class="calibre2">此外，为了支持使用开源R语言的想法，人们必须理解R的一般架构。R引擎是由大约20人的核心小组编写的，他们有权访问R引擎的源代码(即使只有6人从事日常R开发)。这群人不仅维护代码，而且他们自己也是贡献者、错误修复者和开发人员。所以，R引擎是开源的，这意味着它是自由软件(在GNU许可下)，但是引擎没有公开维护。另一方面，R库(或包)大多是社区驱动的贡献，这意味着社区中的人们可以自由地开发和创建各种函数来支持统计计算、可视化、使用数据集以及许多其他方面。</p>
<p class="calibre2">在SQL Server 2016发布后的几个月里(从2016年夏天开始)，微软还改变了SQL Server不同版本中的可用内容。如果您访问位于<a href="https://www.microsoft.com/en-us/sql-server/sql-server-2016-editions" class="calibre10">https://www . Microsoft . com/en-us/SQL-Server/SQL-Server-2016-editions</a>的SQL Server 2016 editions概述，您可以看到在高级分析下，基本R集成在SQL Server 2016的所有版本中都可用，而高级R集成(<kbd class="calibre11">RevoScaleR</kbd>包中的ScaleR函数完全并行)仅在企业版和开发者版中可用。</p>


            

            
        
    </body></html>


<html xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <title>The Microsoft Machine learning R Server platform</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  

</head>
  <body id="PNV60-e3f81285367248f4bbc6431bcd4f926d" class="calibre">
        

                            
                    <h1 class="header-title" id="calibre_pb_0">微软机器学习R服务器平台</h1>
                
            
            
                
<p class="calibre2">我们已经简单地提到了R Open和R for enterprise environment的概念。Microsoft Machine Learning R Server是一个企业服务器，它提供可以并行处理的高维度和大型数据集，工作负载可以跨节点分布。R Server可以在Windows、Linux服务器或HDFS系统(如Hadoop、Spark、Teradata和HD Insight)上处理这些并行和分布式工作负载。R Server可以使用专门设计的Microsoft R包来实现并行和分布式工作负载。<kbd class="calibre11">RevoScaleR</kbd>包将提供高度并行和分布式计算、统计分析、预测分析以及机器学习和深度学习的能力。</p>
<p class="calibre2">随着对Revolution Analytics公司的收购，微软将其两个主要产品Revolution R Open和Revolution R Enterprise更名为Microsoft R Open和Microsoft R Server以及Microsoft SQL Server R Services。除了这两种风格，他们还添加了Microsoft R Client作为额外的独立产品:</p>
<div><img class="aligncenter1" src="img/00008.jpeg"/></div>
<p>图3</p>
<p class="calibre2">基于不同的风格和企业生态系统，公司可以选择他们需要的使用类型(社区、非商业和商业)，并且基于他们的业务需求和他们希望他们的分析服务器安装在哪里，他们可以选择最适合他们的。在商业版本中，可以使用独立的机器学习R服务器(或简称为R服务器)，以及数据库中的机器学习服务(或SQL Server R服务)。</p>
<p class="calibre2">在SQL Server 2017版本中，微软R Server已改为机器学习服务器(既有数据库内的，也有作为单机的；从数据库内R服务到机器学习R服务的更名是在SQL Server VNext的CTP版本中引入的，该版本后来更改为SQL Server 2017)。在<em class="calibre12">图4 </em>中，可以看到安装SQL Server 2016时可用的命名(左打印屏幕)和SQL Server 2017中将可用的名称(右打印屏幕):</p>
<div><img class="aligncenter2" src="img/00009.jpeg"/></div>
<p>图4</p>
<p class="calibre2">命名变化的原因是微软在SQL Server 2017中引入了Python。Python是一种强大的统计、分析和机器学习语言，因此，名称是统一的。机器学习服务器的R部分不会在内部改变，但它将获得有用的附加包和改进的功能，如下所示:</p>
<pre class="calibre19">serialize/unserialize -&gt; rxSerializeModel/rxUnserializeModel 
InstallPackages -&gt; rxInstallPackages 
Histogram -&gt; rxHistogram </pre>
<p class="calibre2">所有这些函数都经过了重写，以便在并行和分布式工作负载中处理大型数据集，或者支持R和SQL Server工作。</p>
<p class="calibre2">在Microsoft R平台中，可以使用以下产品:</p>
<ul class="calibre7">
<li class="calibre8">微软机器学习R服务器</li>
<li class="calibre8">微软R客户端</li>
<li class="calibre8">Microsoft R打开</li>
<li class="calibre8">Visual Studio的r工具</li>
</ul>
<p class="calibre2">产品描述基于微软文档的描述和2016年9月发表在SQL server central(【http://www.sqlservercentral.com/articles/Microsoft/145393/】T2)上的一篇文章。</p>


            

            
        
    </body></html>


<html xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <title>Microsoft R Open (MRO)</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  

</head>
  <body id="QMFO0-e3f81285367248f4bbc6431bcd4f926d" class="calibre">
        

                            
                    <h1 class="header-title" id="calibre_pb_0">微软R开放(MRO)</h1>
                
            
            
                
<p class="calibre2">微软R Open是一个开源的R发行版，它是100%免费的，并且普遍可用。微软增强了这个R Open发行版，增加了一个高性能的多线程特性<strong class="calibre1">数学内核库</strong> ( <strong class="calibre1"> MKL </strong>)，针对基于向量和矩阵的数学和统计计算进行了优化；否则，这个发行版完全兼容遗留的R对象和R代码。</p>
<p class="calibre2">R Open还兼容CRAN库、GitHub包或任何其他库，使得MRO可以广泛使用。另一方面，R Open也有一些局限性。它受内存限制，这意味着它只能处理适合可用内存(客户端)的数据集。专有的ScaleR函数(在<kbd class="calibre11">RevoScaleR</kbd>包中可用)在R Open下将不可用，它将在所有SQL Server 2017版本上运行，Express或Express with Tools除外，而Microsoft R Client/Server将仅在SQL Server 2017的企业版或开发者版上运行。</p>
<p class="calibre2">Microsoft R Client是与Microsoft R Open相同的R发行版，它是建立在100%开源R版本之上的。微软R Client是微软R版本家族中第一个引入了<kbd class="calibre11">RevoScaleR</kbd>包(ScaleR函数)的版本。安装此版本的数据管理员、数据科学家或数据工程师(或任何其他人员)将能够使用并行化和多线程计算，以及ScaleR的专有功能。</p>
<p class="calibre2">R客户端版本有一些限制。内存将被限制在本地客户机上，限制与Microsoft R Open相同—数据必须适合本地内存才能进行计算。ScaleR函数将与该版本一起安装，但处理将仅限于同时处理两个线程(无论客户端机器的技术规格如何)以及本地磁盘和CPU速度。否则，任何遗留的R包或R代码都将是兼容的。</p>
<p class="calibre2">微软R Client还带来了改变计算环境的可能性，这意味着可以将计算负载推送给微软R Server或SQL Server R Services以及任何HDFS系统，以实现最大性能。用许多R客户机和一个(或几个)R服务器构建生态系统将提供一个高性能的分析环境，而不需要在本地安装Microsoft R服务器。它与以下版本的R Server兼容:Microsoft R server for Linux、Microsoft R Server for Teradata DB、Microsoft R Server for Hadoop、Microsoft R HDInsight以及两个版本的Microsoft R Server-Standalone和SQL Server R Services。</p>


            

            
        
    </body></html>


<html xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <title>Microsoft Machine Learning R Server</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  

</head>
  <body id="RL0A0-e3f81285367248f4bbc6431bcd4f926d" class="calibre">
        

                            
                    <h1 class="header-title" id="calibre_pb_0">微软机器学习R服务器</h1>
                
            
            
                
<p class="calibre2">Microsoft R Server是R engine的独立服务器版本，构建在R开源平台之上，但经过修改以适应企业环境和大量分析用途的需求，从统计分析和数据挖掘到机器学习和任何大数据任务。</p>
<p class="calibre2">它完全兼容克兰/MRAN/GitHub库和任何R遗留代码。<kbd class="calibre11">RevoScaleR</kbd>包中可用的定标器函数和算法能够进行并行和多线程数据处理，对R Open或R Client没有任何限制。计算是为大型数据集准备的，在大多数情况下，数据集很容易超过服务器内存大小。这可以通过一种特殊的外部数据帧格式来实现，这种格式支持多线程计算，并支持基于R的应用程序，这些应用程序可以在ConnectR和DeployR的帮助下跨多平台执行并行计算和可部署的解决方案。Microsoft R Server还提供了磁盘可伸缩性。</p>


            

            
        
    </body></html>


<html xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <title>Microsoft SQL Server Machine Learning R Services</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  

</head>
  <body id="SJGS0-e3f81285367248f4bbc6431bcd4f926d" class="calibre">
        

                            
                    <h1 class="header-title" id="calibre_pb_0">Microsoft SQL Server机器学习服务</h1>
                
            
            
                
<p class="calibre2">R Open distribution的数据库内风格可作为面向Microsoft SQL Server的机器学习R服务，并涵盖了所有在<kbd class="calibre11">RevoScaleR</kbd>包中可用的ScaleR算法。</p>
<p class="calibre2">在这种情况下，内存和磁盘将由您安装的SQL Server管理，R的执行是使用管理SQL Server和R引擎之间通信的<kbd class="calibre11">SQL Server Trusted Launchpad</kbd>服务来完成的。</p>
<p class="calibre2">此外，用户可以使用R客户端连接到R服务，但<kbd class="calibre11">DeployR</kbd>和<kbd class="calibre11">ConnectR</kbd>功能将受到限制。</p>
<p class="calibre2">Microsoft SQL Server R Services是SQL Server 2016及更高版本的数据库内版本，这将是本书的主要关注点。安装新的SQL Server实例时，可以安装这些数据库内服务。<em class="calibre12">图4 </em>显示将R in-database service(或作为SQL Server 2017一部分的机器学习服务(in-database))作为实例特性安装，勾选该特性时，将安装R service(或Python service)。还必须理解，Microsoft R Server是一个独立的组件，在安装R服务时不会安装它。必须在共享服务下的R服务器(机器学习服务器)旁边明确地打上勾号。但是，R服务(在数据库中)不会安装R服务器。</p>
<p class="calibre2">R Services (in-database)是R语言和R编程的独立来源，具有SQL Server的完整堆栈和功能，包括用于治理、安全性、可靠性和性能的工具和技术。在SSMS，可以调用R函数，使用transact SQL和R脚本进行R分析或预测。这可以通过使用系统外部程序:<kbd class="calibre11">sp_execute_external_script</kbd>来实现。</p>
<p class="calibre2">作为R服务(数据库内)安装的一部分，ScaleR库允许数据科学家、开发人员或数据库管理员从SQL Server计算机或Microsoft R Server上安全地执行R脚本。通过定义计算上下文，用户可以选择将计算和负载推送到哪里，要么留在数据库R运行时，要么使用ScaleR库来增强连接性和并行性，并将负载推送到Microsoft R服务器。</p>
<p class="calibre2">最后，通过安装作为独立安装程序提供的client R，您可以开发自己的R代码，并将解决方案部署到R服务或运行在Windows或Linux上的Microsoft R Server。</p>
<p class="calibre2">图5描述了数据科学家或数据分析师如何将负载从客户机/工作站推送到基于云的解决方案、虚拟机、R服务器或R服务(数据库内)。从客户的角度来看，人们也可以很容易地选择混合解决方案，特别是当需要不同系统之间的数据集成和数据整合时。这一概念肯定会给企业带来立竿见影的性能提升，以及几乎即时的更快更好的解决方案适应能力:</p>
<div><img src="img/00010.jpeg" class="calibre25"/></div>
<p>图5</p>


            

            
        
    </body></html>


<html xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <title>R Tools for Visual Studio (RTVS)</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  

</head>
  <body id="TI1E0-e3f81285367248f4bbc6431bcd4f926d" class="calibre">
        

                            
                    <h1 class="header-title" id="calibre_pb_0">Visual Studio的r工具(RTVS)</h1>
                
            
            
                
<p class="calibre2">RTVS是微软IDE的免费版本(在GNU许可下发布),用于在Visual Studio中编写、验证和运行R代码。Visual Studio 2015和Visual Studio 2017的社区版、专业版和企业版支持RTVS。</p>
<p class="calibre2">r Tools(<a href="https://www.visualstudio.com/vs/rtvs/" class="calibre10">https://www.visualstudio.com/vs/rtvs/</a>)将帮助开发者、分析师和数据科学家操作和执行统计计算、可视化和数据管理。R Tools为R Engine带来了图形界面、用于丰富编辑的工作空间、交互式窗口、变量和视觉资源管理器、帮助、智能感知等等。它还绑定了本地和远程工作区(内部或云中)，因此数据分析师可以非常轻松地在计算环境之间切换。</p>
<p class="calibre2">RTVS工作区的视图变得简单且图形化，便于用户在不同的R环境之间切换:</p>
<div><img class="aligncenter3" src="img/00011.jpeg"/></div>
<p>图6</p>
<p class="calibre2">它类似于著名而强大的RStudio(【www.rstudio.com】)但是仍然提供了社区和时间为r studio、Emacs、Vim、Eclipse或其他开发带来的所有必需品。微软也向社区发出问卷，询问RTVS的用户还缺少什么。他们可以在https://www.surveymonkey.com/r/RTVS1<a xmlns:epub="http://www.idpf.org/2007/ops" href="https://www.surveymonkey.com/r/RTVS1" class="calibre10">投稿并添加他们的愿望。</a></p>
<p class="calibre2">RTVS在2016年初宣布并发布(作为测试版)，但在2017年才获得版本1。</p>


            

            
        
    </body></html>


<html xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <title>The Microsoft Machine Learning R Services architecture</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  

</head>
  <body id="UGI00-e3f81285367248f4bbc6431bcd4f926d" class="calibre">
        

                            
                    <h1 class="header-title" id="calibre_pb_0">微软机器学习服务架构</h1>
                
            
            
                
<p class="calibre2">R Server的体系结构涵盖了许多必要的组件，以便R IDE或SQL Server与R engine之间的通信能够正常工作。</p>
<p class="calibre2">为了正确执行Transact SQL，R脚本并将所有结果返回给T-SQL，涉及到几个组件:</p>
<div><img class="aligncenter4" src="img/00012.jpeg"/></div>
<p>图7</p>
<p class="calibre2">Launchpad是SQL Server 2016中的一项新服务，支持使用来自SQL Server的外部存储过程执行外部脚本。但是，在SQL Server 2017中，还引入了Python启动器，使得Launchpad普遍适用于第二种非SQL Server语言。Launchpad背后的想法是，既然基础设施已经准备好了，SQL Server应该在未来也支持其他语言，如JavaScript和C++，不仅向预测分析和机器学习开放这项服务，也向其他独立语言开放。</p>
<p class="calibre2">Launchpad服务(服务名:<kbd class="calibre11">MSSQLLaunchpad</kbd>)依赖于SQL Server服务(服务名:<kbd class="calibre11">MSSQLSERVER</kbd>)，这意味着当重新启动或停止SQL Server服务时，Launchpad服务也将被重新启动或停止。</p>
<p class="calibre2">此外，R语言还带来了两个额外的服务:R终端服务(缩写为RTerm)和BxlServer，它们使用SQL Satellite，这是SQL server的一个额外扩展，用于在外部运行时(与Launchpad服务相关)和SQL Server之间进行通信；两者都可以作为过程找到。</p>
<p class="calibre2">为了更容易理解这些相关性，让我们启动一个简单的PowerShell脚本来查看<kbd class="calibre11">Launchpad</kbd>和<kbd class="calibre11">BxlServer</kbd>的所有组件:</p>
<pre class="calibre19"><strong class="calibre1">Get-Process -Name Launchpad | Select-Object * </strong>
<strong class="calibre1">Get-Process -Name BxlServer | Select-Object *</strong>  </pre>
<p class="calibre2">此外，通过简单的T-SQL代码，我们可以包含R脚本:</p>
<pre class="calibre19">EXEC sp_execute_external_script 
    @language = N'R' 
   ,@script = N'library(RevoScaleR) 
OutputDataSet &lt;- data.frame(rxInstalledPackages())' </pre>
<p class="calibre2">此外，观察流程浏览器和启动板流程:</p>
<div><img class="aligncenter5" src="img/00013.jpeg"/></div>
<p>图8</p>
<p class="calibre2">很明显，通信是如何创建从SQL Server到R并返回的整个循环的。</p>
<p class="calibre2">此外，命令行还显示Launchpad进程使用了<kbd class="calibre11">RLauncher.dll</kbd>库，并使用<kbd class="calibre11">sqlsatellite.dll</kbd>启动<kbd class="calibre11">sqlsatelitelaunch</kbd>:</p>
<pre class="calibre19"><strong class="calibre1">CommandLine: "C:\Program Files\Microsoft SQL Server\MSSQL14.MSSQLSERVER\MSSQL\bin\launchpad.exe" -launcher RLauncher.dll -pipename sqlsatellitelaunch -timeout 600000 -logPath "C:\Program Files\Microsoft  SQL Server\MSSQL14.MSSQLSERVER\MSSQL\LOG\ExtensibilityLog" -workingDir "C:\Program Files\Microsoft SQL Server\MSSQL14.MSSQLSERVER\MSSQL\ExtensibilityData" -satelliteDllPath</strong></pre>
<pre class="calibre19"><strong class="calibre1">"C:\Program Files\Microsoft SQL Server\MSSQL14.MSSQLSERVER\MSSQL\Binn\sqlsatellite.dll"   </strong></pre>
<p class="calibre2">更多的配置将告诉您在这种架构中通信是在哪里以及如何建立的。打开<kbd class="calibre11">RLauncher.config</kbd>文件将显示如下配置:</p>
<div><img class="aligncenter6" src="img/00014.gif"/></div>
<p>图9</p>
<p class="calibre2">此外，通过更改<kbd class="calibre11">TRACE_LEVEL</kbd>参数，它还可以显示潜在的日志，显示系统之间的相同路径和通信，因为<kbd class="calibre11">RevoScaleR</kbd>日志还显示每个工作会话的信息:</p>
<pre class="calibre19">library(RevoScaleR); sessionDirectory &lt;- 'C:\\PROGRA~1\\MICROS~3\\MSSQL1~1.MSS\\MSSQL\\EXTENS~1\\MSSQLSERVER01\\0FEB1004-867F-4AB6-B9CC-E1C824596645';sessionId &lt;- '0FEB1004-867F-4AB6-B9CC-E1C824596645';scriptFile &lt;- file.path(sessionDirectory, paste(sessionId, '.R', sep=''));rxIgnoreCallResult &lt;- .Call('RxSqlSessionStart', list(sessionDirectory=sessionDirectory, sessionId=sessionId, waitTime=-1));source(scriptFile) </pre>


            

            
        
    </body></html>


<html xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <title>R Limitations</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  

</head>
  <body id="VF2I0-e3f81285367248f4bbc6431bcd4f926d" class="calibre">
        

                            
                    <h1 class="header-title" id="calibre_pb_0">r限制</h1>
                
            
            
                
<p class="calibre2">社区博客和论坛，以及软件包作者和贡献者，都在争论这种语言的一长串限制。许多是模糊不清的，有些是严肃地基于特定的用户体验组，但是可以同意以下限制:</p>
<ul class="calibre7">
<li class="calibre8">性能问题</li>
<li class="calibre8">内存限制</li>
<li class="calibre8">安全方面</li>
<li class="calibre8">语言句法</li>
</ul>


            

            
        
    </body></html>


<html xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <title>Performance issues</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  

</head>
  <body id="10DJ40-e3f81285367248f4bbc6431bcd4f926d" class="calibre">
        

                            
                    <h1 class="header-title" id="calibre_pb_0">性能问题</h1>
                
            
            
                
<p class="calibre2">超过40%的R代码主要是用C编写的，还有20%多一点的代码是用Fortran编写的(其余的是用C++、Java和R编写的)，这使得一些常见的计算任务非常昂贵。为了解决性能问题，微软(以及之前的Revolution analytics)的确将一些最常用的函数从旧的Fortran重写为C/C++。</p>
<p class="calibre2">许多软件包作者做了非常相似的事情。例如，<kbd class="calibre11">data.table</kbd> R软件包的主要作者Matt Dowle做了一些语言性能提升，以加快最常见的数据争论步骤。</p>
<p class="calibre2">当比较使用不同包(如<kbd class="calibre11">dplyr</kbd>、<kbd class="calibre11">plyr</kbd>、<kbd class="calibre11">data.table</kbd>和<kbd class="calibre11">sqldf</kbd>)对相同数据集的类似操作时，可以看到相同结果的时间性能差异。</p>
<p class="calibre2">下面的R示例粗略地显示了一个80 MiB的大对象，该对象带有一个简单的分组函数，该函数表示计算时间的差异。与<kbd class="calibre11">plyr</kbd>和<kbd class="calibre11">sqldf</kbd>相比，封装<kbd class="calibre11">dpylr</kbd>和data.table表现突出，性能提升超过25倍。<kbd class="calibre11">data.table</kbd>尤其高效，这主要是因为Matt极力优化<kbd class="calibre11">data.table</kbd>包的代码以提高性能:</p>
<pre class="calibre19">set.seed(6546) 
nobs &lt;- 1e+07 
df &lt;- data.frame("group" = as.factor(sample(1:1e+05, nobs, replace = TRUE)), "variable" = rpois(nobs, 100)) 
 
# Calculate mean of variable within each group using plyr - ddply  
library(plyr) 
system.time(grpmean &lt;- ddply( 
  df,  
  .(group),  
  summarize,  
  grpmean = mean(variable))) 
 
 
# Calcualte mean of variable within each group using dplyr 
detach("package:plyr", unload=TRUE) 
library(dplyr) 
 
system.time( 
  grpmean2 &lt;- df %&gt;%  
              group_by(group) %&gt;% 
              summarise(group_mean = mean(variable))) 
 
# Calcualte mean of variable within each group using data.table 
library(data.table) 
system.time( 
  grpmean3 &lt;- data.table(df)[ 
    #i 
    ,mean(variable)    
    ,by=(group)] ) 
 
# Calcualte mean of variable within each group using sqldf 
library(sqldf) 
system.time(grpmean4 &lt;- sqldf("SELECT avg(variable), [group] from df GROUP BY [group]")) </pre>
<p class="calibre2">另一方面，微软<kbd class="calibre11">RevoScaleR</kbd>软件包也经过了优化，在性能和大型数据集方面可以取代所有这些软件包。这只是为了证明微软是如何让R为大型数据集做好准备来解决性能问题的。</p>


            

            
        
    </body></html>


<html xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <title>Memory limitations</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  

</head>
  <body id="11C3M0-e3f81285367248f4bbc6431bcd4f926d" class="calibre">
        

                            
                    <h1 class="header-title" id="calibre_pb_0">内存限制</h1>
                
            
            
                
<p class="calibre2">r是内存受限的。这实际上意味着数据集必须适合客户端的RAM。从前面的例子来看，如果有人要运行一个简单的代数运算，一些矩阵计算，或任何一种基于距离的算法(计算量很大)，R系统将被限制在RAM中。没有溢出到磁盘或任何类型的临时对象是可用的，除非用户加载一个允许的包。</p>
<p class="calibre2">同样，微软的<kbd class="calibre11">RevoScaleR</kbd>包解决了这个限制。随着<strong class="calibre1">外部数据帧</strong> ( <strong class="calibre1"> XDF </strong>)格式的引入，该包能够以这种格式存储任何大小的数据集(没有记录器上限)，该格式持久存储在磁盘上，可以从二进制、blob、CSV或任何其他格式转换为XDF格式。这种限制在Microsoft Machine Learning R Server或Machine Learning R Services中成为可能。</p>


            

            
        
    </body></html>


<html xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <title>Security aspects</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  

</head>
  <body id="12AK80-e3f81285367248f4bbc6431bcd4f926d" class="calibre">
        

                            
                    <h1 class="header-title" id="calibre_pb_0">安全方面</h1>
                
            
            
                
<p class="calibre2">R语言作为GNU发行版的发展在过去几十年中一直是作为基于客户端的解决方案发展的，甚至在互联网出现之前，所有数据集都已经安全地存储在一个人的机器上。随着数据在互联网、云服务和连接系统上的传播，以及越来越多的现有混合解决方案系统，读取、写入、分析和存储数据的安全性方面从来都不是问题。然而，在过去的十年里，越来越多的系统不断涌现，企业需求发生了变化，人们的角色也发生了变化——但核心的R引擎和IDE尚未朝着这个方向迈出一步。从这方面来看，R似乎想继续成为一所大学开发和驱动的软件。通过将R集成到SQL Server中，微软解决了这些问题，不仅创建了数据库角色，还添加了安全连接到R和所有计算的服务，减少了安全漏洞的可能性。</p>


            

            
        
    </body></html>


<html xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <title>Language syntax</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  

</head>
  <body id="1394Q0-e3f81285367248f4bbc6431bcd4f926d" class="calibre">
        

                            
                    <h1 class="header-title" id="calibre_pb_0">语言句法</h1>
                
            
            
                
<p class="calibre2">r语言非常灵活，允许用户更改S4方法和S3对象、通用对象以及所有用户定义的对象和变量。由于R语言仍然不是面向对象的语言，这是一个争论的问题，如果这是真的还是假的(因为目前，R只理解三个面向对象的系统)，因为S3和S4对象都是面向对象的结构。</p>
<p class="calibre2">r语法可能很容易学习，但是也很容易产生一些疑问。以下是R社区中的一些语法分歧:</p>
<ul class="calibre7">
<li class="calibre8">几个不同的R包给用户相同的功能(数据争论、数据分析、数据预测)。如前所示，当出于数据争论的目的将这些包的性能与使用情况进行比较时，用户将看到哪个包性能更好，或者哪个包更适合他们的需求。具有令人困惑的结构的特殊语法也是该包的一部分，可以以许多不同的方式使用。</li>
<li class="calibre8">做同样的事情有多种方法(声明一个变量，构造一个类，处理数据，用同样的算法预测)。</li>
<li class="calibre8">缺少约定、名称空间和包之间的依赖关系。</li>
<li class="calibre8">缺乏文档/帮助的有点挑战性的错误消息。</li>
<li class="calibre8">区分大小写。</li>
</ul>
<p class="calibre2">列出所有的问题是很麻烦的，但人们可以很快了解语言是如何发展的，但仍然被越来越多的社区所接受；r作为一种语言被认为是迄今为止最流行的。</p>


            

            
        
    </body></html>


<html xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <title>Summary</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  

</head>
  <body id="147LC0-e3f81285367248f4bbc6431bcd4f926d" class="calibre">
        

                            
                    <h1 class="header-title" id="calibre_pb_0">摘要</h1>
                
            
            
                
<p class="calibre2">本章概述了微软提供的新R服务和R引擎产品系列的生态系统。</p>
<p class="calibre2">当考虑R和SQL Server时，人们必须记住企业的需求是什么，以及如何准备基础设施，以便利用强大的<kbd class="calibre11">RevoScaleR</kbd>包的最大性能。</p>
<p class="calibre2">在下一章中，我们将看到如何使用这些标量计算函数来提供更好的性能结果，以及如何建立您的生态系统。</p>


            

            
        
    </body></html>
</body></html>